#!/bin/bash

if (($# == 0)); then
  echo "Usage: omarchy-channel-set [stable|edge|dev]"
  exit 1
else
  channel="$1"
fi

STATE_DIR="$HOME/.local/state/omarchy"
STATE_FILE="$STATE_DIR/channel"

case "$channel" in
"stable") omarchy-branch-set "fedora" ;;
"edge") omarchy-branch-set "fedora" ;;
"dev") omarchy-branch-set "dev" ;;
*) echo "Unknown channel: $channel"; exit 1; ;;
esac

mkdir -p "$STATE_DIR"
echo "$channel" > "$STATE_FILE"

omarchy-update -y
