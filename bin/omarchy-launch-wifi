#!/bin/bash

# Launch the Omarchy wifi controls (provided by the Impala TUI).
# Attempts to unblock the wifi service first in case it should be been blocked.

rfkill unblock wifi

if command -v impala >/dev/null 2>&1; then
  exec omarchy-launch-or-focus-tui impala
fi

if command -v nm-connection-editor >/dev/null 2>&1; then
  exec setsid uwsm-app -- nm-connection-editor >/dev/null 2>&1
fi

if command -v nmtui >/dev/null 2>&1; then
  exec omarchy-launch-or-focus-tui nmtui
fi

if command -v nmcli >/dev/null 2>&1; then
  exec omarchy-launch-or-focus-tui nmcli device wifi
fi

if command -v iwctl >/dev/null 2>&1; then
  exec omarchy-launch-or-focus-tui iwctl
fi

notify-send "Wi-Fi" "No supported Wi-Fi UI found (impala/nm-connection-editor/nmtui/nmcli/iwctl)."
