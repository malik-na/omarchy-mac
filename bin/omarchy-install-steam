#!/bin/bash

# Install and launch Steam after first letting the user pick the correct grahics card drivers.

set -e

# Check for ARM64 architecture
ARCH=$(uname -m)
if [[ "$ARCH" == "aarch64" || "$ARCH" == "arm64" ]]; then
  cat << 'EOF'

╔═══════════════════════════════════════════════════════════════╗
║                                                               ║
║   ⚠️  Steam Not Available on Apple Silicon/ARM64             ║
║                                                               ║
║   Steam for Linux is only available for x86_64 systems.       ║
║   Native ARM64 Steam does not exist.                          ║
║                                                               ║
║   Alternatives for gaming on Apple Silicon:                   ║
║   • Box86/Box64 - x86 emulation (experimental, slow)          ║
║   • Native ARM games via Flatpak/itch.io                      ║
║   • RetroArch for emulation (ARM-native)                      ║
║   • Web-based gaming (GeForce NOW, Xbox Cloud)                ║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝

EOF
  echo "Current architecture: $ARCH"
  echo "Steam installation is only available on x86_64 systems."
  echo
  exit 1
fi

echo "Now pick dependencies matching your graphics card"
sudo dnf install -y steam
setsid gtk-launch steam >/dev/null 2>&1 &
